(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{401:function(t,e,s){"use strict";s.r(e);var a=s(25),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"使用github-pages-vuepress-travis实现自动化部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用github-pages-vuepress-travis实现自动化部署"}},[t._v("#")]),t._v(" 使用Github Pages + Vuepress + Travis实现自动化部署")]),t._v(" "),s("h2",{attrs:{id:"构建vuepress"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#构建vuepress"}},[t._v("#")]),t._v(" 构建Vuepress")]),t._v(" "),s("p",[t._v("参考"),s("a",{attrs:{href:"https://vuepress.vuejs.org/zh/",target:"_blank",rel:"noopener noreferrer"}},[t._v("vuepress官网"),s("OutboundLink")],1),t._v("构建一个本地项目")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新建项目目录")]),t._v("\nmkdir my"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("blog "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" cd my"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("blog\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 初始化")]),t._v("\nnpm init "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("y\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 安装依赖")]),t._v("\nnpm i vuepress "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 更新scripts")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dev"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vuepress dev ."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vuepress build ."')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新建 markdown 首页文件")]),t._v("\necho "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'# Hello Vuepress'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("README")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("md\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动本地服务")]),t._v("\nnpm run dev\n")])])]),s("p",[t._v("通过"),s("code",[t._v("npm run dev")]),t._v("和"),s("code",[t._v("npm run build")]),t._v("在本地运行和构建。具体如何配置"),s("code",[t._v("vuepress")]),t._v("，请自行查阅"),s("a",{attrs:{href:"https://vuepress.vuejs.org/zh/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("h2",{attrs:{id:"配置github-token"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置github-token"}},[t._v("#")]),t._v(" 配置github token")]),t._v(" "),s("p",[t._v("要使用"),s("code",[t._v("travis")]),t._v("自动化部署，"),s("code",[t._v("travis")]),t._v("就需要读取你的"),s("code",[t._v("github")]),t._v("的"),s("code",[t._v("repo")]),t._v("。"),s("code",[t._v("github")]),t._v("提供了"),s("code",[t._v("token")]),t._v("机制供外部访问你的仓库。")]),t._v(" "),s("p",[t._v("进入"),s("a",{attrs:{href:"https://github.com/settings/tokens",target:"_blank",rel:"noopener noreferrer"}},[t._v("github token"),s("OutboundLink")],1),t._v("，生成一个供"),s("code",[t._v("travis")]),t._v("用的token，token的权限暂时全选，token注意保密且需要安全保存")]),t._v(" "),s("h2",{attrs:{id:"配置travis"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置travis"}},[t._v("#")]),t._v(" 配置Travis")]),t._v(" "),s("p",[t._v("使用github账号登陆"),s("a",{attrs:{href:"https://travis-ci.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("travis"),s("OutboundLink")],1),t._v(",点击左侧"),s("code",[t._v("+")]),t._v("配置需要同步的仓库。\n在仓库选择列表打开需要同步的仓库的开关，并点击设置按钮进行配置。在环境变量("),s("code",[t._v("Environment Variables")]),t._v(")中添加一栏我们刚才获取的"),s("code",[t._v("token")]),t._v(","),s("code",[t._v("name")]),t._v("为键名("),s("em",[t._v("过会有用")]),t._v("),"),s("code",[t._v("value")]),t._v("为"),s("code",[t._v("token")]),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"编写travis配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编写travis配置文件"}},[t._v("#")]),t._v(" 编写Travis配置文件")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("vuepress")]),t._v("项目根目录新建"),s("code",[t._v(".travis.yml")]),t._v("自动化构建的配置文件")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd my-blog\ntouch .travis.yml\n")])])]),s("p",[s("code",[t._v(".travis.yml")]),t._v("配置如下：")]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("language")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" node_js\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node_js")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" lts/*\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("install")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" yarn install \n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" yarn build \n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("provider")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" pages\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("target_branch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" master   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 发布的分支")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("skip_cleanup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("local_dir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" .vuepress/dist\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("github_token")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $blog "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在 GitHub 中生成，用于允许 Travis 向你的仓库推送代码。在 Travis 的项目设置页面进行配置的键名，设置为 secure variable")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("keep_history")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" blog    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 推送的分支")]),t._v("\n")])])]),s("p",[t._v("我们再"),s("code",[t._v("github pages")]),t._v("的同一个仓库下面，使用"),s("code",[t._v("blog")]),t._v("分支提交我们的源文件，使用"),s("code",[t._v("master")]),t._v("发布我们的博客。")]),t._v(" "),s("h2",{attrs:{id:"结束"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#结束"}},[t._v("#")]),t._v(" 结束")]),t._v(" "),s("p",[t._v("以后每次更新完博客，直接"),s("code",[t._v("push")]),t._v("到"),s("code",[t._v("blog")]),t._v("分支，"),s("code",[t._v("travis")]),t._v("会读取"),s("code",[t._v("blog")]),t._v("分支源码下的"),s("code",[t._v(".travis.yml")]),t._v("文件，自动帮我们生成并部署网站")]),t._v(" "),s("h2",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),s("ol",[s("li",[s("a",{attrs:{href:"https://docs.travis-ci.com/user/deployment/pages/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Travis Doc"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://kuifafa.com/2019/07/02/deploy/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Travis自动化部署VuePress到Github Pages"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://nettee.github.io/posts/2018/Travis-Hexo-blog-automatic-deploy/",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 Travis CI 实现 Github Pages + Hexo 博客的自动部署"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://vuepress.vuejs.org/zh/guide/deploy.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("VuePress - 部署"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://qinyuanpei.github.io/posts/3521618732/",target:"_blank",rel:"noopener noreferrer"}},[t._v("持续集成在Hexo自动化部署上的实践"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/steveklabnik/automatically_update_github_pages_with_travis_example",target:"_blank",rel:"noopener noreferrer"}},[t._v("Automatically Update Github Pages with Travis"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/25066056",target:"_blank",rel:"noopener noreferrer"}},[t._v("一点都不高大上，手把手教你使用Travis CI实现持续部署"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=r.exports}}]);