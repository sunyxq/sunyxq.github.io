# 混合内容<Mixed Content>

> https页面中不能使用http请求，http页面中可以使用https请求

## 什么是混合内容

初始`HTML`内容通过安全的`https`连接加载，其他资源（如图片、视频、样式表、脚本）通过不安全的`http`连接加载。因为页面的初始请求是安全的，但又加载了不安全的`http`内容，因此称之为混合内容。

## 解决方案

1. 相对协议
如果网站有`https`和`http`资源，使用**相对协议**可以根据当前网站的协议，浏览器自行选择通过`https`还是`http`发起请求，设置相对协议就是将`url`的协议(`https`,`http`)去掉。如：`<img src="//domain.com/img/logo.png">`

2. 被动混合内容
`被动混合内容`指不与页面其余部分交互的内容，包括图片、视频和音频内容，以及无法与页面其余部分进行交互的资源。浏览器会`block`掉`https`页面上的`http`请求。所以可以通过`img.src`发送`get`请求。

```js
sendRequest() {
  const img = new Image()
  img.src = 'http://domain.com/url'
}
```

## 参考

1. [混合内容](https://developer.mozilla.org/zh-CN/docs/Security/MixedContent)
2. [关于混合内容](https://segmentfault.com/a/1190000015244759)
3. [在https中引入http资源所导致的问题](https://juejin.im/post/5c204153e51d45351c4f21e4#heading-6)